#### dev.admin.unilend.fr VirtualHost ####
<VirtualHost *:80>
    ServerName dev.admin.unilend.fr
    DocumentRoot "/srv/sites/unilend/public/admin"
    ErrorLog ${APACHE_LOG_DIR}/dev.admin.unilend.error.log
    CustomLog ${APACHE_LOG_DIR}/dev.admin.unilend.custom.log combined
    <Directory "/srv/sites/unilend/public/admin">
        EnableSendfile Off
        AllowOverride All
        Order deny,allow
        allow from All
    </Directory>
</VirtualHost>

##################################

<IfModule ssl_module>
    <VirtualHost *:443>
    <Directory "/srv/sites/unilend/public/admin">
        EnableSendfile Off
        Options FollowSymLinks -Indexes

        AllowOverride All
        Order deny,allow
        allow from All

        AddDefaultCharset UTF-8

        <ifmodule mod_expires.c>
            # 1 YEAR
            <FilesMatch "\.(ico|pdf|flv)$">
                Header set Cache-Control "max-age=29030400, public"
            </FilesMatch>
            # 1 WEEK
            <FilesMatch "\.(jpg|jpeg|png|gif|swf)$">
                Header set Cache-Control "max-age=604800, public"
            </FilesMatch>
            # 2 DAYS
            <FilesMatch "\.(xml|txt|css|js)$">
                Header set Cache-Control "max-age=172800, proxy-revalidate"
            </FilesMatch>
            # 1 MIN
            <FilesMatch "\.(html|htm|php)$">
                Header set Cache-Control "max-age=60, private, proxy-revalidate"
            </FilesMatch>
        </ifmodule>

        FileETag None

        # COMPRESSION
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/x-javascript

        # MASQUAGE
        IndexIgnore */*

        # REWRITE
        RewriteEngine On
        RewriteCond %{HTTP:X-Forwarded-Proto} !https$
        RewriteCond %{HTTPS} !on
        RewriteRule /?(.*) https://dev.admin.unilend.fr/$1 [R=301,L]
        RewriteCond %{HTTP_HOST} !dev.admin.unilend.fr$
        RewriteRule /?(.*) https://dev.admin.unilend.fr/$1 [R=301,L]

        # RULES
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . index.php

    </Directory>
    ServerName dev.admin.unilend.fr
    ServerAlias dev.admin.unilend.fr
    DocumentRoot "/srv/sites/unilend/public/admin"
    SSLEngine on
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
    SSLCertificateFile "/vagrant/conf/ssl_crt/dev.admin.unilend.fr.crt"
    SSLCertificateKeyFile "/vagrant/conf/ssl_key/dev.admin.unilend.fr.key"
    ErrorLog ${APACHE_LOG_DIR}/dev.admin.unilend.fr_ssl_error.log
    TransferLog ${APACHE_LOG_DIR}/dev.admin.unilend.fr_ssl_access.log
    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    BrowserMatch ".*MSIE.*" \
        nokeepalive ssl-unclean-shutdown \
        downgrade-1.0 force-response-1.0
    CustomLog ${APACHE_LOG_DIR}/dev.admin.unilend.fr_ssl_request.log \
        "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
    </VirtualHost>
</IfModule>