<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="unilend.frontbundle.twig_extension" class="Unilend\Bundle\FrontBundle\Twig\FrontBundleExtension" public="false">
            <tag name="twig.extension" />
            <argument>%kernel.root_dir%</argument>
            <argument type="service" id="assets.packages" />
            <argument type="service" id="unilend.service.statistics_manager" />
            <argument type="service" id="unilend.service.translation_manager" />
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="memcache.default" />
            <argument type="service" id="unilend.service.location_manager" />
        </service>

        <service id="unilend.frontbundle.security.password_encoder" class="Unilend\Bundle\FrontBundle\Security\BCryptPasswordEncoder">
            <argument>%security.bcrypt.cost%</argument>
        </service>

        <service id="unilend.frontbundle.service.testimonial_manager" class="Unilend\Bundle\FrontBundle\Service\TestimonialManager">
            <argument type="service" id="unilend.service.entity_manager"/>
            <argument type="service" id="memcache.default" />
        </service>

        <service id="unilend.frontbundle.security.user_provider" class="Unilend\Bundle\FrontBundle\Security\User\UserProvider">
            <argument type="service" id="unilend.service.entity_manager"/>
            <argument type="service" id="unilend.service.client_manager"/>
            <argument type="service" id="unilend.frontbundle.notification_display_manager"/>
            <argument type="service" id="unilend.service.lender_manager"/>
            <argument type="service" id="unilend.service.client_status_manager" />
        </service>

        <service id="unilend.frontbundle.security.login_authenticator" class="Unilend\Bundle\FrontBundle\Security\LoginAuthenticator">
            <argument type="service" id="security.password_encoder"/>
            <argument type="service" id="router" />
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="unilend.service.notification_manager" />
            <argument type="service" id="security.authentication.session_strategy" />
            <argument type="service" id="security.csrf.token_manager" />
            <argument type="service" id="logger" />
        </service>

        <service id="unilend.frontbundle.service.project_display_manager" class="Unilend\Bundle\FrontBundle\Service\ProjectDisplayManager">
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="unilend.service.project_manager" />
            <argument type="service" id="unilend.frontbundle.service.lender_account_display_manager" />
            <argument type="service" id="unilend.service.company_balance_sheet_manager" />
            <argument type="service" id="cache" />
        </service>

        <service id="unilend.frontbundle.provider.route_provider" class="Unilend\Bundle\FrontBundle\Service\RouteProvider">
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="logger" />
            <argument type="service" id="cache" />
        </service>

        <service id="unilend.frontbundle.service.lender_account_display_manager" class="Unilend\Bundle\FrontBundle\Service\LenderAccountDisplayManager">
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="unilend.service.location_manager" />
            <argument type="service" id="translator" />
            <argument type="service" id="memcache.default" />
            <argument type="service" id="unilend.service.cip_manager" />
        </service>

        <service id="unilend.frontbundle.service.source_manager" class="Unilend\Bundle\FrontBundle\Service\SourceManager">
            <argument type="service" id="request_stack" />
        </service>

        <service id="unilend.frontbundle.service.data_layer_collector" class="Unilend\Bundle\FrontBundle\Service\DataLayerCollector">
            <argument type="service" id="security.token_storage" />
            <argument type="service" id="request_stack" />
            <argument type="service" id="google_tag_manager" />
        </service>

        <service id="unilend.frontbundle.service.payline_manager" class="Unilend\Bundle\FrontBundle\Service\PaylineManager">
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument type="service" id="unilend.swiftmailer.message_provider"/>
            <argument type="service" id="swiftmailer.mailer.default" />
            <argument type="service" id="unilend.service.client_manager" />
            <argument type="service" id="unilend.service.operation_manager" />
            <argument type="service" id="router" />
            <argument type="service" id="assets.packages" />
            <argument>%path.payline%include.php</argument>
            <call method="setLogger">
                <argument type="service" id="logger" on-invalid="null"/>
            </call>
        </service>

        <service id="unilend.frontbundle.notification_display_manager" class="Unilend\Bundle\FrontBundle\Service\NotificationDisplayManager">
            <argument type="service" id="unilend.service.entity_manager"/>
            <argument type="service" id="unilend.service.autobid_settings_manager"/>
            <argument type="service" id="translator"/>
            <argument type="service" id="router" />
        </service>

        <service id="unilend.frontbundle.seo_manager" class="Unilend\Bundle\FrontBundle\Service\SeoManager">
            <argument type="service" id="sonata.seo.page"/>
            <argument type="service" id="translator"/>
        </service>

        <service id="unilend.frontbundle.service.content_manager" class="Unilend\Bundle\FrontBundle\Service\ContentManager">
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="memcache.default" />
        </service>

        <service id="unilend.frontbundle.service.universign_manager" class="Unilend\Bundle\FrontBundle\Service\UniversignManager">
            <argument type="service" id="unilend.service.entity_manager" />
            <argument type="service" id="unilend.service.email_manager"/>
            <argument type="service" id="router" />
            <argument type="service" id="logger" />
            <argument type="service" id="unilend.swiftmailer.message_provider"/>
            <argument type="service" id="swiftmailer.mailer.default" />
            <argument>%url.universign%</argument>
            <argument>%kernel.root_dir%</argument>
        </service>

        <service id="unilend.frontbundle.security.client_role" class="Unilend\Bundle\FrontBundle\Security\ClientRole">
            <argument type="service" id="security.role_hierarchy"/>
        </service>
    </services>
</container>
