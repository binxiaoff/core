{%- block collection_row -%}
    {% if prototype is defined %}
        {% set prototype_markup = form_row(prototype) %}
        {% set data_prototype_name = form.vars.form.vars.prototype.vars.name|default('__name__') %}
        {% set attr = form.vars.attr|merge({
            'data-prototype': prototype_markup,
            'data-prototype-name': data_prototype_name
        })|merge(attr) %}
    {% endif %}
    <div{% for attrname, attrvalue in attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
    {{ block('collection_widget') }}
    </div>
{%- endblock collection_row -%}

{%- block project_tranche_type_row -%}
    <div class="row row-multi-col">
        <div class="row row-multi-col">
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.name) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.money.amount, {attr: {'data-fee-reference-amount': ''}}) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.money.currency) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.duration, {label_help: 'tranche-form.maturity-unit'}) }}
            </div>
        </div>
        <div class="row row-multi-col">
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.loanType) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.repaymentType) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.capitalPeriodicity, {label_help: 'tranche-form.capital-periodicity-unit'}) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.interestPeriodicity, {label_help: 'tranche-form.interest-periodicity-unit'}) }}
            </div>
        </div>
        <div class="row row-multi-col">
            <div class="col-lg-4 col-md-4">
                {{ form_row(form.rate.indexType) }}
            </div>
            <div class="col-lg-4 col-md-4">
                {{ form_row(form.rate.margin, {label_help: 'lending-form.margin-unit'}) }}
            </div>
            <div class="col-lg-4 col-md-4">
                {{ form_row(form.rate.floor, {label_help: 'lending-form.floor-unit'}) }}
            </div>
        </div>
        <div class="row row-multi-col">
            <div class="col-lg-6 col-md-6">
                {{ form_row(form.expectedReleasingDate) }}
            </div>
            <div class="col-lg-6 col-md-6">
                {{ form_row(form.expectedStartingDate) }}
            </div>
        </div>
        <div class="row row-multi-col">
            <h5 class="h4">{% trans %} tranche-form.fees {% endtrans %}</h5>
            {{ form_row(form.trancheFees) }}
        </div>
        <div class="row text-align-right">
            <button data-action="remove" type="button" class="btn-default btn-shape-xxs">{% trans %} tranche-form.delete-row {% endtrans %}</button>
        </div>
        <hr>
    </div>
{%- endblock project_tranche_type_row -%}

{%- block fee_type_row -%}
    <div class="row row-multi-col">
        <div class="row row-multi-col">
            <div class="col-lg-4 col-md-4">
                {{ form_row(form.fee.type) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.fee.rate) }}
            </div>
            <div class="col-lg-3 col-md-3">
                {{ form_row(form.fee.isRecurring) }}
            </div>
            <div class="col-lg-2 col-md-2">
                <button data-action="remove" type="button" class="btn-default btn-shape-xxs" style="margin-top: 45px;">{% trans %} fee-form.delete-row {% endtrans %}</button>
            </div>
        </div>
    </div>
{%- endblock fee_type_row -%}

{%- block bid_fee_type_row -%}
    {{- block('fee_type_row') -}}
{%- endblock bid_fee_type_row -%}

{%- block tranche_fee_type_row -%}
    {{- block('fee_type_row') -}}
{%- endblock tranche_fee_type_row -%}

{%- block project_fee_type_row -%}
    {{- block('fee_type_row') -}}
{%- endblock project_fee_type_row -%}

{%- block project_attachment_type_row -%}
    <div class="row row-multi-col">
        <div class="col-lg-4 col-md-4">
            {{ form_row(form.attachment.type) }}
        </div>
        <div class="col-lg-4 col-md-4">
            {{ form_row(form.attachment.description) }}
        </div>
        <div class="col-lg-4 col-md-4">
            {{ form_row(form.attachment.file) }}
        </div>
    </div>
{%- endblock project_attachment_type_row -%}
