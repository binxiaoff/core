{# Dashboard #}
{% extends 'layouts/_layout.html.twig' %}

{% block siteHeader %}
    {% include 'partials/site/header-dashboard.html.twig' %}
{% endblock %}

{#{% block siteFooter %}
  {% embed 'partials/site/footer.twig' %}
    {% block siteMobileMenu %} {% endblock %}
  {% endembed %}
{% endblock %} #}

{% block siteContent %}

    <article{% if page.id is not empty %} id="{{ page.id }}"{% endif %} class="dashboard{% if page.classNames is not empty %} {{ page.classNames }}{% endif %}">
        <div class="dashboard-inner">
            <div class="site-wrap">
                <div class="col-menu">
                    <nav class="dashboard-nav">
                        {% block dashboardNav %}
                            <ul>
                                <li role="presentation" class="dashboard-nav-dashboard {% if app.request.attributes.get('_route') == 'lender_dasboard' %}active{% else %}complete{% endif %}">
                                    <a href="{{ path('lender_dashboard') }}"><span class="icon fa-dashboard-u"></span><span class="label">Tableau de bord</span></a>
                                </li>
                                <li role="presentation" class="dashboard-nav-balance {% if app.request.attributes.get('_route') == 'wallet' %}active{% else %}complete{% endif %}">
                                    <a href="{{ path('wallet') }}"><span class="icon fa-money-u32"></span><span class="label">{% trans %} lender-dashboard-navigation_wallet-link {% endtrans %}</span></a>
                                </li>
                                <li role="presentation" class="dashboard-nav-projects {% if app.request.attributes.get('_route') == 'user/preter/projects' %}active{% else %}complete{% endif %}">
                                    <a href="{{ route('user/preter/projects') }}"><span class="icon fa-project-u"></span><span class="label">Projets</span></a>
                                </li>
                                <li role="presentation" class="dashboard-nav-operations {% if app.request.attributes.get('_route') == 'lender_operations' %}active{% else %}complete{% endif %}">
                                    <a href="{{ path('lender_operations') }}"><span class="icon fa-operations-u"></span><span class="label">{% trans %} lender-dashboard-navigation_operations-link {% endtrans %}</span></a>
                                </li>
                                <li role="presentation" class="dashboard-nav-profile {% if app.request.attributes.get('_route') == 'lender_profile' %}active{% else %}complete{% endif %}">
                                    <a href="{{ path('lender_profile') }}"><span class="icon fa-profile-u"></span><span class="label">{% trans %} lender-dashboard-navigation_profile-link {% endtrans %}</span></a>
                                </li>
                                <li role="presentation" class="dashboard-nav-autolend {% if app.request.attributes.get('_route') == 'user/preter/autolend' %}active{% else %}complete{% endif %}">
                                    <a href="{{ route('user/preter/autolend') }}"><span class="icon fa-autolend-u"></span><span class="label">Autolend</span></a>
                                </li>
                                <li role="presentation" class="dashboard-nav-notifications {% if app.request.attributes.get('_route') == 'user/preter/notifications' %}active{% else %}complete{% endif %}">
                                    <a href="{{ route('user/preter/notifications') }}"><span class="icon fa-bell-u"></span><span class="label">Notifications</span></a>
                                </li>
                            </ul>
                        {% endblock %}
                    </nav>

                    {% block dashboardNotifications %}
                        {% include 'partials/components/dashboard-panel-notifications.twig' %}
                    {% endblock %}

                </div><!-- /.col-menu -->
                <div class="col-content dashboard-content">
                    {% block dashboardContent %} {% endblock %}
                </div><!-- /.col-content -->
            </div><!-- /.site-wrap -->
        </div><!-- /.dashboard-inner -->
    </article><!-- /.dashboard -->

{% endblock %}

{# Put in the notifications as a JSON object here, then other JS components can reference as a single source rather than dotted throughout multiple files #}
{% block extendHead %}
    {# Placeholder data #}
    {% set placeholderData = {
        notifications: [{
            type: 'offer-rejected',
            title: 'Offre refusée',
            datetime: 'now'|date_modify('-5 minutes'),
            content: 'Votre offre de prêt de 45€ au taux de 9,4% à Garage Toniol a été refusée.',
            image: svgimage('#notification-offer-rejected', 'Offre refusée', 100, 100, 'none'),
            status: 'unread'
        },{
            type: 'remboursement',
            title: 'Remboursement',
            datetime: 'now'|date_modify('-2 hours'),
            content: 'Vous avez reçu un remboursement de 12,35€ de Garage Toniol.',
            image: svgimage('#notification-remboursement', 'Remboursement', 100, 100, 'none'),
            status: 'unread'
        },{
            type: 'offer-accepted',
            title: 'Remboursement',
            datetime: 'now'|date_modify('-3 days')|date('j F, H:i'),
            content: 'Vous avez reçu un remboursement de 12,35€ de Garage Toniol.',
            image: svgimage('#notification-offer-accepted', 'Offre acceptée', 100, 100, 'none'),
            status: 'unread'
        },{
            type: 'account',
            title: 'Solde bas',
            datetime: 'now'|date_modify('-4 days')|date('j F, H:i'),
            content: '',
            image: svgimage('#notification-account-lowbalance', 'Solde bas', 100, 100, 'none'),
            status: 'read'
        },{
            type: 'remboursement',
            title: 'Remboursement',
            datetime: 'now'|date_modify('-5 days 8 hours 35 minutes')|date('j F, H:i'),
            content: 'Vous avez reçu un remboursement de 12,35€ de Garage Toniol.',
            image: svgimage('#notification-remboursement', 'Remboursement', 100, 100, 'none'),
            status: 'read'
        },{
            type: 'remboursement',
            title: 'Remboursement',
            datetime: 'now'|date_modify('-5 days 15 hours 20 minutes')|date('j F, H:i'),
            content: 'Vous avez reçu un remboursement de 12,35€ de Garage Toniol.',
            image: svgimage('#notification-remboursement', 'Remboursement', 100, 100, 'none'),
            status: 'read'
        },{
            type: 'project-added',
            title: 'Nouveau projet',
            datetime: 'now'|date_modify('-6.5 days')|date('j F, H:i'),
            content: 'Created a new project.',
            image: svgimage('#notification-project-added', 'Nouveau projet', 100, 100, 'none'),
            status: 'read'
        }]
    } %}
    <script type="text/javascript" rel="notifications">
        var USERNOTIFICATIONS = JSON.parse('{{ placeholderData.notifications|json_encode|escape('js')|raw }}')
    </script>
{% endblock %}
