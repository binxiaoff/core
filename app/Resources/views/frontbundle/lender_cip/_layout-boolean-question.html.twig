{% extends 'lender_account/_layout_lender.html.twig' %}

{% set page = {
    id: 'user-preter-profile',
    title: 'lender-evaluation_questionnaire-page-title'|trans,
    classNames: 'user-preter-profile'
} %}

{% block dashboardContent %}
    <div class="dashboard-tabs tabs">
        {% include 'lender_profile/partials/tab_navigation.html.twig' %}

        <article id="dashboard-cip" class="dashboard-tabs-content tab-content">
            <div id="cip-step-{{ current_step }}">
                <div class="panel cip-header">
                    <header class="panel-header">
                        <h3>{% trans %} lender-evaluation_questionnaire-page-title {% endtrans %}</h3>
                    </header>
                    <div class="cip-progress" data-progressbar data-progressbar-current="{{ current_step }}" data-progressbar-total="{{ total_steps }}">
                        <div data-progressbar-bar></div>
                    </div>
                </div>

                <form method="post" action="{{ path('cip_form_questionnaire') }}" class="panel">
                    <input type="hidden" name="question" value="{{ question.id }}" />
                    {% if answers.current is not defined or answers.current is empty %}
                        <div class="row">
                            <h4>{{ text.question|raw }}</h4>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 push-lg-2 col-md-3 push-md-2 col-sm-2 push-sm-1 col-xs-1">
                                <button type="submit" name="answer" value="{{ constant('\\lender_questionnaire_question::VALUE_BOOLEAN_TRUE') }}" class="btn-primary btn-size-full cursor">{% trans %} lender-evaluation_questionnaire-answer-yes {% endtrans %}</button>
                            </div>
                            <div class="col-lg-3 push-lg-2 col-md-3 push-md-2 col-sm-2 push-sm-2 col-xs-1 push-xs-2">
                                <button type="submit" name="answer" value="{{ constant('\\lender_questionnaire_question::VALUE_BOOLEAN_FALSE') }}" class="btn-primary btn-size-full cursor">{% trans %} lender-evaluation_questionnaire-answer-no {% endtrans %}</button>
                            </div>
                        </div>
                    {% elseif answers.current.first is defined and answers.current.first == question.valid_answer %}
                        <div class="row">
                            <h4>{{ text.question|raw }}</h4>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 push-lg-2 col-md-3 push-md-2 col-sm-2 push-sm-1 col-xs-1">
                                <span class="{% if question.valid_answer == constant('\\lender_questionnaire_question::VALUE_BOOLEAN_TRUE') %}btn-yes{% else %}btn-primary{% endif %} btn-size-full">{% trans %} lender-evaluation_questionnaire-answer-yes {% endtrans %}</span>
                            </div>
                            <div class="col-lg-3 push-lg-2 col-md-3 push-md-2 col-sm-2 push-sm-2 col-xs-1 push-xs-2">
                                <span class="{% if question.valid_answer == constant('\\lender_questionnaire_question::VALUE_BOOLEAN_FALSE') %}btn-yes{% else %}btn-primary{% endif %} btn-size-full">{% trans %} lender-evaluation_questionnaire-answer-no {% endtrans %}</span>
                            </div>
                        </div>
                        <div class="row">
                            <p>{{ text.yes_explanation|raw }}</p>
                        </div>
                        <div class="row text-align-right">
                            <button type="submit" name="continue" value="next_question" class="btn-primary btn-shape-md cursor">{% trans %} lender-evaluation_questionnaire-next {% endtrans %}</button>
                        </div>
                    {% elseif answers.current.first is defined and answers.current.first == question.invalid_answer and answers.current.second is not defined %}
                        <div class="row">
                            <h4>{{ text.question|raw }}</h4>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 push-lg-2 col-md-3 push-md-2 col-sm-2 push-sm-1 col-xs-1">
                                <span class="{% if question.valid_answer == constant('\\lender_questionnaire_question::VALUE_BOOLEAN_TRUE') %}btn-primary{% else %}btn-no{% endif %} btn-size-full">{% trans %} lender-evaluation_questionnaire-answer-yes {% endtrans %}</span>
                            </div>
                            <div class="col-lg-3 push-lg-2 col-md-3 push-md-2 col-sm-2 push-sm-2 col-xs-1 push-xs-2">
                                <span class="{% if question.valid_answer == constant('\\lender_questionnaire_question::VALUE_BOOLEAN_FALSE') %}btn-primary{% else %}btn-no{% endif %} btn-size-full">{% trans %} lender-evaluation_questionnaire-answer-no {% endtrans %}</span>
                            </div>
                        </div>
                        <div class="row">
                            <p>{{ text.no_explanation|raw }}</p>
                        </div>
                        <div class="row">
                            <h5>{{ text.alt_question|raw }}</h5>
                        </div>
                        <div class="row text-align-right">
                            <button type="submit" name="answer" value="{{ constant('\\lender_questionnaire_question::VALUE_BOOLEAN_TRUE') }}" class="btn-primary btn-shape-md cursor">
                                {% trans %} lender-evaluation_questionnaire-answer-yes {% endtrans %}</button>
                            <button type="submit" name="answer" value="{{ constant('\\lender_questionnaire_question::VALUE_BOOLEAN_FALSE') }}" class="btn-primary btn-shape-md cursor">
                                {% trans %} lender-evaluation_questionnaire-answer-no {% endtrans %}</button>
                        </div>
                    {% elseif answers.current.first is defined and answers.current.first == question.invalid_answer and answers.current.second == question.invalid_answer %}
                        <div class="row">
                            <h4>{{ ('lender-evaluation_questionnaire-result-not-eligible-' ~ lenderType ~ '-person-text')|trans|raw }}</h4>
                        </div>
                        <div class="row">
                            <div class="col-lg-5 col-md-5 col-sm-3 col-xs-2">
                                <button type="submit" name="continue" value="back" class="btn-primary btn-size-full cursor">{% trans %} lender-evaluation_questionnaire-result-non-eligible-acceptance-button {% endtrans %}</button>
                            </div>
                            <div class="col-lg-5 push-lg-2 col-md-5 push-md-2 col-sm-3 push-sm-2 col-xs-2">
                                <button type="submit" name="continue" value="loop" class="btn-primary btn-size-full cursor">{% trans %} lender-evaluation_questionnaire-result-non-eligible-insist-button {% endtrans %}</button>
                            </div>
                        </div>
                    {% endif %}
                </form>
            </div><!-- /#cip-step-{{ current_step }} -->
        </article><!-- /.dashboard-tabs-content -->
    </div>
{% endblock %}
